databaseChangeLog:
  - changeSet:
      id: 20241210091000_modify_designation_id_and_foreign_key
      author: athiq
      changes:
        # Step 1: Drop the foreign key constraint first
        - dropForeignKeyConstraint:
            baseTableName: department_designation
            constraintName: fk_designation_department

        # Step 2: Modify the 'id' column in the 'designation' table
        - modifyDataType:
            tableName: designation
            columnName: id
            newDataType: int
            constraints:
              nullable: false
        - addColumn:
            tableName: designation
            columns:
              - column:
                  name: id
                  type: int
                  constraints:
                    nullable: false
                    primaryKey: true
                    autoIncrement: true

        # Step 3: Re-add the foreign key constraint
        - addForeignKeyConstraint:
            baseTableName: department_designation
            baseColumnNames: designation_id
            referencedTableName: designation
            referencedColumnNames: id
            constraintName: fk_designation_department

  # Other changelogs can go here (like adding image_url column)
  - changeSet:
      id: 20241007104300_addimage_des
      author: athiq
      changes:
        - addColumn:
            tableName: designation
            columns:
              - column:
                  name: image_url
                  type: varchar(255)
                  constraints:
                    nullable: true
